<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Plugin SEO Jekyll akan otomatis mengisi title, description, canonical, dll. -->
    {% seo %}
    {% if page.keywords %}
    <meta name="keywords" content="{{ page.keywords | join: ', ' }}">
    {% endif %}
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- [DITAMBAHKAN] SCRIPT PEMBLOKIRAN BOT & VPN -->
    <script>
        (function() {
            // GANTI 'YOUR_API_KEY_HERE' DENGAN API KEY ANDA DARI IPQUALITYSCORE
            const apiKey = 'EvYIWrGLS7lPh2UqNQqcoVoPJ5K0U2Bz';
            const url = `https://www.ipqualityscore.com/api/json/ip/${apiKey}/`;

            // Fungsi untuk mengganti seluruh halaman dengan pesan blokir
            function blockAccess() {
                document.documentElement.innerHTML = `
                    <head>
                        <title>Akses Ditolak</title>
                        <style>
                            body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #1a1a1a; color: #f0f0f0; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; padding: 20px; box-sizing: border-box; }
                            .message-box { text-align: center; padding: 30px; border: 1px solid #333; border-radius: 10px; background-color: #2a2a2a; max-width: 500px; }
                            h1 { color: #ff5555; margin-top: 0; }
                            p { color: #ccc; }
                        </style>
                    </head>
                    <body>
                        <div class="message-box">
                            <h1>Akses Ditolak</h1>
                            <p>Untuk menjaga keamanan dan kualitas konten, penggunaan Bot, Proxy, atau VPN tidak diizinkan di situs ini. Harap nonaktifkan layanan tersebut dan coba lagi.</p>
                        </div>
                    </body>
                `;
            }

            // Memanggil API untuk memeriksa IP pengunjung
            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        console.warn('IPQS API request failed with status:', response.status);
                        return null;
                    }
                    return response.json();
                })
                .then(data => {
                    if (data && data.success) {
                        // Kriteria pemblokiran: VPN, Proxy, Bot, atau Skor penipuan tinggi
                        if (data.vpn || data.proxy || data.is_crawler || data.fraud_score > 85) {
                            blockAccess();
                        }
                    }
                })
                .catch(error => {
                    console.error('Gagal memeriksa IP:', error);
                });
        })();
    </script>
    <!-- AKHIR SCRIPT PEMBLOKIRAN -->
</head>
<body>
    <header>
        <h1><a href="{{ '/' | relative_url }}" style="color:white; text-decoration:none;">{{ site.title }}</a></h1>
        <nav class="header-nav">
            <ul>
                <li><a href="{{ '/' | relative_url }}">Home</a></li>
                <li><a href="#">Android</a></li>
                <li><a href="#">Dekstop</a></li>
            </ul>
        </nav>
    </header>

    <main>
        {{ content }}
    </main>
    
    <section class="pre-footer-ad">
       <script type="text/javascript">
            atOptions = {
                'key' : '2c79cc096860bf4d747e0bd6bc4dfd12',
                'format' : 'iframe',
                'height' : 90,
                'width' : 728,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//eyebrowcohabit.com/2c79cc096860bf4d747e0bd6bc4dfd12/invoke.js"></script>
    </section>
    <nav class="footer-nav">
        <div class="footer-links">
            <a href="#">Disclaimer</a> &bull;
            <a href="#">Privacy Policy</a> &bull;
            <a href="#">Terms of Use</a>
        </div>
    </nav>
    <footer>
        <p>&copy; {{ site.time | date: "%Y" }} {{ site.title }}. Template Created by Dian Arifin.</p>
    </footer>

    <!-- SCRIPT IKLAN ANDA -->
    <script async src="//d.smopy.com/d/?resource=pubJS"></script>
    <script src="/zzhpryhfcfpqya.php"></script>
    <!-- AKHIR SCRIPT IKLAN -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const h2Element = document.getElementById('typing-h2');
            const pElement = document.getElementById('typing-p');

            if (h2Element && pElement) {
                const h2Text = h2Element.getAttribute('data-text');
                const pText = pElement.getAttribute('data-text');

                function typeWriter(element, text, speed, callback) {
                    let i = 0;
                    element.innerHTML = ""; // Kosongkan elemen
                    const cursor = '<span class="typing-cursor"></span>';
                    element.innerHTML = cursor;

                    const typingInterval = setInterval(() => {
                        if (i < text.length) {
                            element.childNodes[0].nodeValue += text.charAt(i);
                            i++;
                        } else {
                            clearInterval(typingInterval);
                            if (callback) {
                                callback();
                            }
                        }
                    }, speed);
                }

                // Mulai animasi berurutan
                typeWriter(h2Element, h2Text, 50, () => {
                    // Setelah H2 selesai, mulai ketik P
                    typeWriter(pElement, pText, 25, null);
                });
            }
        });
    </script>
    <script>
    function startDownloadProcess(downloadUrl) {
        const button = document.getElementById('dynamic-download-button');
        
        // Cek jika sedang loading, jangan lakukan apa-apa
        if (button.classList.contains('loading')) {
            return;
        }

        const progressBar = button.querySelector('.progress-bar-inline');
        const countdownText = document.getElementById('countdown-text');
        
        button.classList.add('loading'); // Tambah class 'loading' untuk menonaktifkan
        
        let progress = 0;
        let countdown = 10;
        const intervalTime = 100; // 0.1 detik
        const totalSteps = (10 * 1000) / intervalTime;

        // Tampilkan teks countdown awal
        countdownText.textContent = `Tunggu, link unduhan akan dibuka otomatis dalam ${countdown} detik...`;
        
        const interval = setInterval(() => {
            progress += 100 / totalSteps;
            progressBar.style.width = progress + '%';
            
            // Update countdown setiap 1 detik
            if ((10000 - (progress / 100 * 10000)) % 1000 < intervalTime) {
                countdown--;
                if (countdown >= 0) {
                    countdownText.textContent = `Tunggu, link unduhan akan dibuka otomatis dalam ${countdown} detik...`;
                }
            }
            
            if (progress >= 100) {
                clearInterval(interval);
                // Buka link di tab baru setelah selesai
                window.open(downloadUrl, '_blank');
                
                // Reset tombol setelah beberapa saat
                setTimeout(() => {
                    button.classList.remove('loading');
                    progressBar.style.width = '0%';
                    countdownText.textContent = "";
                }, 500);
            }
        }, intervalTime);
    }
    </script>
    <script>
        if (document.getElementById('searchInput')) {
            const searchInput = document.getElementById('searchInput');
            const postItems = document.querySelectorAll('.post-item');
            searchInput.addEventListener('keyup', function(event) {
                const filter = event.target.value.toLowerCase();
                postItems.forEach(function(item) {
                    const title = item.querySelector('.post-title').textContent.toLowerCase();
                    if (title.includes(filter)) { item.style.display = 'flex'; } 
                    else { item.style.display = 'none'; }
                });
            });
        }
    </script>
</body>
</html>
